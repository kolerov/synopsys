Search.setIndex({"docnames": ["buildroot/build", "buildroot/config", "buildroot/index", "environment/index", "environment/linux", "environment/wsl", "index", "qemu/build", "qemu/index", "qemu/using", "qemu/verification/csmith", "qemu/verification/dejagnu", "qemu/verification/state", "snippets/gcc", "snippets/gdb", "snippets/index", "tasks/binutils_file_bug", "tasks/ebpf_jit/ebpf_jit", "tasks/glibc_mmu_bug", "tasks/index", "tasks/qemu_stack_ops", "toolchain/build-dev", "toolchain/build-prod", "toolchain/index"], "filenames": ["buildroot/build.rst", "buildroot/config.rst", "buildroot/index.rst", "environment/index.rst", "environment/linux.rst", "environment/wsl.rst", "index.rst", "qemu/build.rst", "qemu/index.rst", "qemu/using.rst", "qemu/verification/csmith.rst", "qemu/verification/dejagnu.rst", "qemu/verification/state.rst", "snippets/gcc.rst", "snippets/gdb.rst", "snippets/index.rst", "tasks/binutils_file_bug.rst", "tasks/ebpf_jit/ebpf_jit.rst", "tasks/glibc_mmu_bug.rst", "tasks/index.rst", "tasks/qemu_stack_ops.rst", "toolchain/build-dev.rst", "toolchain/build-prod.rst", "toolchain/index.rst"], "titles": ["Build Linux images", "Buildroot configuration", "Buildroot", "Environment", "Linux", "WSL", "Yuriy Kolerov\u2019s documentation", "Building QEMU", "QEMU", "Building and running binaries", "Verification by generating random programs", "DejaGnu tests", "Verification by comparing states", "GCC", "GDB", "Snippets", "\ud83d\udfe2 <code class=\"docutils literal notranslate\"><span class=\"pre\">.file</span></code> directive does not work as intended", "\ud83d\udfe1 Checking JIT for eBPF", "\ud83d\udfe1 glibc testsuite fails with vanilla Linux kernels", "Tasks", "\ud83d\udfe1 Some stack operations are not presented in QEMU", "Building from <code class=\"docutils literal notranslate\"><span class=\"pre\">arc-gnu-toolchain</span></code>", "Building from <code class=\"docutils literal notranslate\"><span class=\"pre\">crosstool-ng</span></code>", "GNU Toolchain"], "terms": {"manual": [0, 16], "http": [0, 4, 5, 7, 10, 11, 16, 17, 18, 21, 22], "org": [0, 4, 7, 17], "download": [0, 5, 17], "html": 0, "train": 0, "bootlin": 0, "com": [0, 4, 5, 7, 11, 16, 17, 18, 21, 22], "doc": [0, 17], "slide": 0, "pdf": 0, "prerequisit": 0, "packag": [0, 4, 5, 8, 17], "can": [0, 4, 5, 7, 10, 16, 18, 20, 21, 22], "instal": [0, 3, 8, 18, 21, 22], "ubuntu": [0, 3, 8], "22": [0, 3, 17], "04": [0, 3, 7], "follow": [0, 5], "command": [0, 5, 10, 12, 13, 14, 16], "sudo": [0, 4, 5, 7, 18, 21, 22], "apt": [0, 4, 5, 7, 21, 22], "texinfo": [0, 4, 21, 22], "byacc": [0, 4, 22], "flex": [0, 4, 5, 21, 22], "essenti": [0, 4, 5, 21, 22], "git": [0, 3, 5, 7, 11, 17, 18, 21, 22], "firstli": [0, 21, 22], "would": 0, "better": [0, 5, 7], "set": [0, 5, 11, 12, 17, 18], "share": 0, "directori": [0, 5, 11, 17, 18, 21, 22], "bashrc": [0, 3, 5, 7], "export": [0, 4, 7, 11, 17, 18, 21], "br2_dl_dir": [0, 4], "home": [0, 7, 11, 16, 17, 18, 22], "workspac": [0, 11, 16, 18], "o": [0, 9, 12, 16, 17, 18, 20], "buildroot_dl": [0, 4], "clone": [0, 4, 5, 7, 11, 17, 18, 21, 22], "synopsi": [0, 4, 5, 7, 11, 16, 17, 18, 21, 22], "repositori": [0, 4, 17, 21, 22], "github": [0, 5, 7, 11, 16, 17, 18, 21, 22], "foss": [0, 7, 11, 16, 17, 18, 21, 22], "dwc": [0, 7, 11, 16, 17, 18, 21, 22], "processor": [0, 7, 11, 16, 17, 18, 21, 22], "upstream": [0, 17, 18], "net": [0, 5, 17, 18], "tar": [0, 5, 17], "gz": [0, 5], "archiv": 0, "wget": [0, 4, 22], "2022": [0, 4, 16, 17, 18], "08": 0, "xf": 0, "mv": 0, "mkdir": [0, 7, 17, 18, 21], "cd": [0, 4, 5, 7, 11, 17, 18, 21, 22], "thi": [0, 4, 5, 9, 10, 12, 13, 16, 17, 18, 20], "make": [0, 4, 5, 7, 9, 16, 17, 18, 21, 22], "c": [0, 4, 5, 9, 10, 12, 13, 16, 17, 18, 20], "readlink": [0, 18], "e": [0, 4, 16, 18], "defconfig": [0, 17, 18], "path": [0, 4, 7, 9, 17, 18, 21], "your": [0, 5, 7, 9, 17, 21, 22], "snps_archs38_haps_defconfig": 0, "toolchain": [0, 4, 6, 11, 16, 18, 22], "br2_arcl": [0, 17, 18], "y": [0, 4, 17, 18, 21, 22], "br2_archs38": [0, 17, 18], "br2_gcc_version_12_x": [0, 18], "br2_toolchain_uses_glibc": [0, 18], "br2_install_libstdcpp": [0, 18], "br2_enable_local": [0, 18], "br2_use_wchar": [0, 18], "br2_linux_kernel": [0, 18], "br2_linux_kernel_defconfig": [0, 18], "haps_h": [0, 17, 18], "br2_linux_kernel_custom_vers": [0, 18], "br2_linux_kernel_custom_version_valu": [0, 18], "5": [0, 16, 18, 20, 21], "16": [0, 16, 18, 21], "br2_linux_kernel_vmlinux": [0, 18], "br2_target_rootfs_initramf": [0, 18], "prebuilt": [0, 5], "09": [0, 4, 16, 18], "br2_toolchain_extern": [0, 17, 18], "br2_toolchain_external_custom": [0, 17, 18], "br2_toolchain_external_custom_glibc": [0, 17, 18], "br2_toolchain_external_download": 0, "br2_toolchain_external_url": 0, "releas": [0, 4, 5, 18], "arc_gnu_2022": 0, "09_prebuilt_glibc_le_archs_linux_instal": 0, "br2_toolchain_external_local": [0, 18], "br2_toolchain_external_has_ssp": [0, 18], "br2_toolchain_external_cxx": [0, 17, 18], "br2_toolchain_external_headers_5_16": [0, 17, 18], "br2_toolchain_external_gdb_server_copi": [0, 17, 18], "contain": [0, 5, 13, 17], "snps_arc32_defconfig": 0, "snps_arc64_defconfig": 0, "snps_arc700_axs101_defconfig": 0, "snps_archs38_axs103_defconfig": 0, "snps_archs38_hsdk_defconfig": 0, "from": [0, 4, 5, 6, 9, 10, 16, 17, 23], "i": [0, 5, 9, 10, 11, 12, 13, 14, 16, 17, 18, 20], "br2_toolchain_external_path": [0, 17, 18], "arch": [0, 5, 9, 12, 16, 17, 18, 20, 21, 22], "snp": [0, 4, 5, 18, 21, 22], "gnu": [0, 4, 6, 11, 17, 18, 22], "br2_toolchain_external_custom_prefix": [0, 17, 18], "an": [0, 9, 16, 17, 21], "overlai": [0, 17, 18], "br2_rootfs_overlai": [0, 17, 18], "br2_linux_kernel_config_fragment_fil": [0, 18], "fragment": [0, 17, 18], "custom": [0, 3, 17], "br2_linux_kernel_custom_git": 0, "br2_linux_kernel_custom_repo_url": 0, "br2_linux_kernel_custom_repo_vers": 0, "arc64": [0, 4, 7, 9, 20, 21, 22], "build": [2, 3, 4, 6, 8, 11, 18, 23], "linux": [2, 3, 5, 6, 7, 8, 19, 22], "imag": [2, 6, 9, 17, 18], "configur": [2, 3, 6, 7, 17, 21, 22], "bootstrap": [3, 17, 22], "fedora": [3, 8], "37": 3, "profil": [3, 5, 7, 17], "setup": 3, "rust": 3, "elfutil": 3, "wsl": [3, 4, 6], "vpnkit": [3, 4], "dn": 3, "resolv": 3, "vpn": [3, 4], "shrink": [3, 16], "virtual": 3, "disk": 3, "": [3, 4, 9, 10, 12, 16, 17, 18, 21, 22], "space": 3, "kernel": [3, 6, 8, 12, 19], "virtualbox": 4, "guest": 4, "addit": [4, 7], "add": [4, 5, 7, 9, 16, 17, 18], "multivers": 4, "updat": 4, "util": [4, 18, 22], "x11": 4, "common": [4, 21], "vim": 4, "mc": 4, "nmap": 4, "mercuri": 4, "subvers": 4, "cmake": [4, 17], "autoconf": [4, 21, 22], "tmux": 4, "screen": 4, "minicom": 4, "htop": 4, "curl": [4, 7, 21], "rsync": [4, 17, 22], "python3": [4, 7, 22], "pip": 4, "venv": 4, "ipython3": 4, "us": [4, 5, 6, 10, 12, 15, 16, 17, 18, 20, 21, 22], "crosstool": [4, 6, 23], "ng": [4, 6, 7, 23], "our": 4, "script": [4, 11, 12, 18], "help2man": [4, 22], "libtool": [4, 21, 22], "bin": [4, 7, 11, 17, 18, 21, 22], "libncurses5": [4, 7, 22], "dev": [4, 5, 7, 17, 18, 21, 22], "zlib1g": [4, 7, 21, 22], "libexpat1": [4, 21, 22], "texliv": [4, 22], "gawk": [4, 21, 22], "bison": [4, 5, 21, 22], "xz": [4, 22], "local": [4, 5, 22], "dnf": [4, 7, 18], "groupinstal": 4, "develop": [4, 8, 21], "tool": [4, 5, 7, 10, 11, 17, 18, 21, 22], "librari": [4, 9, 17], "bzip2": [4, 7], "diffutil": 4, "file": [4, 5, 6, 9, 11, 12, 13, 17, 18, 19, 20, 21], "gcc": [4, 6, 8, 12, 15, 16, 17, 20, 21], "gperf": [4, 21], "ncurs": [4, 7], "devel": [4, 7, 17], "patch": 4, "perl": 4, "thread": 4, "queue": 4, "unzip": 4, "which": [4, 9, 17], "expat": 4, "pahol": 4, "enabl": [4, 7, 12, 17, 18, 21, 22], "network": [4, 5, 17], "through": [4, 9], "ex": [4, 5, 14, 17, 21], "d": [4, 5, 17, 20], "servic": [4, 5, 18], "start": [4, 5, 14, 17, 18], "base_scratch": 4, "scratch": 4, "ykolerov": [4, 5, 7, 11, 16, 17, 18], "base_ykolerov": 4, "base": 4, "repo": 4, "elf": [4, 9, 12, 13, 14, 20, 21], "arc": [4, 6, 7, 9, 11, 12, 14, 16, 17, 18, 20, 22, 23], "elf32": [4, 9, 11, 12, 14, 16, 17, 20, 21, 22], "arc32": [4, 9, 21], "uclibc": [4, 21], "i686": 4, "w64": 4, "mingw32": 4, "x86_64": 4, "qemu": [4, 6, 9, 11, 12, 17, 18, 19, 21], "qemu_hom": [4, 7], "buildroot": [4, 6, 9, 17, 18], "ld_library_path": [4, 17, 21], "lib": [4, 5, 7, 17], "function": [4, 9, 17], "clean_path": 4, "echo": 4, "sed": 4, "mnt": [4, 5], "clean_ld": 4, "unset": [4, 21], "its": 4, "name": [4, 9, 16, 17, 18, 21], "sai": 4, "remov": [4, 16], "desir": 4, "substr": 4, "shamelessli": 4, "stolen": 4, "unix": [4, 5, 9], "stackexchang": [4, 5], "291611": 4, "path_remov": 4, "delet": 4, "part": [4, 17], "so": [4, 5, 16], "we": [4, 10, 16, 17], "never": 4, "accident": 4, "sub": 4, "1": [4, 5, 7, 11, 16, 17, 18, 21], "ani": [4, 17], "instanc": 4, "middl": 4, "begin": 4, "end": [4, 12], "f": [4, 17, 18, 20], "config": [4, 5, 11, 17], "global": [4, 11, 17, 18], "user": [4, 5, 7, 17, 18], "yurii": [4, 18], "kolerov": [4, 18], "email": [4, 7], "proto": 4, "tlsv1": 4, "2": [4, 5, 7, 11, 18, 21], "ssf": 4, "sh": [4, 11, 17, 18, 21], "rustup": 4, "r": [4, 12, 17, 18], "libmicrohttpd": 4, "libsq3": 4, "libarch": 4, "gettext": 4, "sourcewar": [4, 17], "autoreconf": [4, 17], "fi": [4, 17], "prefix": [4, 7, 17, 21], "latest": [5, 17], "default": [5, 9], "version": [5, 17, 21, 22], "For": [5, 21], "restrict": 5, "consumpt": 5, "memori": [5, 16], "creat": [5, 9, 11, 12, 13, 17, 18], "wslconfig": 5, "wsl2": 5, "8gb": 5, "avoid": 5, "problem": 5, "relat": 5, "corpor": 5, "mai": 5, "found": [5, 10], "sakai135": 5, "import": 5, "distro": 5, "run": [5, 6, 8, 10, 11, 14, 18], "show": [5, 14, 15], "short": [5, 7], "intro": 5, "exit": 5, "env": [5, 11], "userprofil": 5, "when": [5, 16], "you": [5, 7, 9, 10, 16, 18, 20, 21, 22], "open": 5, "termin": 5, "app": 5, "etc": [5, 12, 17, 18, 21], "conf": 5, "generateresolvconf": 5, "fals": 5, "reboot": [5, 9, 12, 17], "nameserv": 5, "10": [5, 14, 18], "228": 5, "0": [5, 7, 9, 11, 12, 13, 16, 17, 18, 20], "search": [5, 6], "intern": 5, "necessari": [5, 17, 18, 22], "instruct": [5, 9, 14], "stephenreescart": 5, "how": 5, "exampl": [5, 9, 16, 17, 20, 21], "p": [5, 13, 17, 18], "diskpart": 5, "microsoft": 5, "19041": 5, "964": 5, "copyright": 5, "On": [5, 16, 17], "comput": 5, "rdn8fhbscc": 5, "select": 5, "vdisk": 5, "appdata": 5, "canonicalgrouplimit": 5, "ubuntu20": 5, "04onwindows_79rhkp1fndgsc": 5, "localst": 5, "ext4": 5, "vhdx": 5, "successfulli": 5, "compact": [5, 16], "100": [5, 18], "percent": 5, "complet": 5, "sometim": 5, "laptop": 5, "befor": 5, "do": 5, "those": 5, "step": 5, "sure": 5, "note": 5, "In": 5, "libssl": 5, "libelf": [5, 17], "dwarv": 5, "bc": [5, 21], "cp": [5, 17], "j": [5, 7, 17, 21], "expr": 5, "nproc": [5, 7, 17, 21], "x86": [5, 13, 17], "boot": 5, "bzimag": 5, "powershel": 5, "shutdown": 5, "detail": [5, 9, 17], "mei": 5, "here": [5, 7, 16, 17, 21, 22], "question": [5, 16], "594470": 5, "doe": [5, 6, 9, 19, 20], "have": [5, 9, 10], "modul": [5, 6], "verif": 6, "compar": [6, 8], "state": [6, 8], "gener": [6, 8, 9, 13, 16, 18], "random": [6, 8], "program": [6, 8, 9, 17], "dejagnu": [6, 8], "test": [6, 8, 9, 10, 12, 18], "binari": [6, 8, 13], "snippet": 6, "gdb": [6, 8, 15, 16, 17, 20, 21], "environ": [6, 11, 17, 22], "task": [6, 17], "check": [6, 18, 19], "jit": [6, 19], "ebpf": [6, 19], "glibc": [6, 19, 21, 22], "testsuit": [6, 11, 19], "fail": [6, 19], "vanilla": [6, 19], "some": [6, 13, 17, 19], "stack": [6, 19], "oper": [6, 9, 19], "ar": [6, 9, 16, 17, 19], "present": [6, 19], "direct": [6, 19], "work": [6, 19], "intend": [6, 19], "index": [6, 17], "page": [6, 10], "find": [7, 10, 16, 18, 20, 21, 22], "good": [7, 16], "tutori": 7, "wiki": 7, "project": 7, "host": [7, 17, 18, 22], "variant": 7, "20": 7, "first": 7, "need": [7, 16, 17], "other": [7, 10, 16], "requir": [7, 9], "get": [7, 16, 17, 18, 21, 22], "libglib2": 7, "libfdt": 7, "libpixman": 7, "ninja": 7, "Then": [7, 16, 20], "featur": 7, "coverag": 7, "libaio": 7, "libbluetooth": 7, "libcapston": 7, "libbrlapi": 7, "libbz2": 7, "libcap": 7, "libcurl4": 7, "gnutl": 7, "libgtk": 7, "3": [7, 21], "libibverb": 7, "libjpeg8": 7, "libnuma": 7, "librbd": 7, "librdmacm": 7, "libsasl2": 7, "libsdl2": 7, "libseccomp": 7, "libsnappi": 7, "libssh": 7, "libvd": 7, "libvdeplug": 7, "libvt": 7, "91": 7, "libxen": 7, "liblzo2": 7, "valgrind": 7, "xfslib": 7, "glib2": 7, "pixman": 7, "zlib": 7, "libiscsi": 7, "capston": 7, "gtk3": 7, "sdl2": 7, "vte291": 7, "nettl": 7, "libattr": 7, "libjpeg": 7, "brlapi": 7, "libgcrypt": 7, "lzo": 7, "snappi": 7, "cyru": 7, "sasl": 7, "libpng": 7, "libuuid": 7, "pulseaudio": 7, "systemtap": 7, "sdt": 7, "libusbx": 7, "retriev": [7, 17, 22], "sourc": [7, 16, 17, 21], "code": [7, 9, 10, 17, 20], "qemu_build": 7, "target": [7, 8, 12, 14, 15, 17, 18, 21], "list": 7, "softmmu": 7, "debug": [7, 17], "tcg": 7, "variabl": 7, "bare": [8, 22], "metal": [8, 22], "metawar": 8, "toolkit": 8, "server": [8, 17, 18], "consid": [9, 16, 20], "simpl": 9, "save": [9, 17], "main": [9, 12, 14, 18, 20], "includ": [9, 12, 17, 20, 21], "stdio": [9, 12, 20], "h": [9, 10, 12, 17, 20, 21, 22], "int": [9, 12, 20], "printf": [9, 12, 20], "hello": [9, 12, 16], "n": [9, 12, 16, 17, 18], "return": [9, 12, 20], "ha": [9, 10, 13, 16, 17], "sim": [9, 11, 12], "board": [9, 18], "purpos": 9, "If": [9, 16], "semihost": 9, "option": [9, 10, 15, 17], "pass": 9, "charact": 9, "devic": [9, 17, 18], "hard": 9, "0x90000000": 9, "address": 9, "A": 9, "built": [9, 16], "spec": [9, 12], "all": [9, 16, 17], "write": 9, "hs4x": [9, 20, 22], "mcpu": [9, 12, 16, 17, 20], "system": [9, 12, 17, 18, 20], "m": [9, 12, 17, 18], "cpu": [9, 12, 17, 18, 21], "1g": [9, 12], "monitor": [9, 12], "none": [9, 12, 18, 21], "displai": [9, 12, 14, 18], "nograph": [9, 12, 17, 18], "serial": [9, 12], "hs5x": [9, 20], "hs6x": [9, 21, 22], "same": [9, 16, 17], "input": 9, "output": [9, 17], "interfac": 9, "nsim": [9, 12], "nsim_emt": [9, 12], "standard": [9, 10], "runtim": 9, "support": [9, 17], "ouput": 9, "both": [9, 17, 20], "mode": [9, 17, 18], "But": [9, 16], "possibl": 9, "implement": [9, 13], "own": [9, 17], "hostlink": 9, "meet": [9, 16], "actual": [9, 16], "just": [9, 16, 17], "one": 9, "_write": 9, "handl": 9, "const": 9, "char": 9, "buf": 9, "unsign": 9, "count": [9, 17], "while": [9, 14, 17], "It": [9, 10, 17, 21, 22], "slightli": 9, "modifi": 9, "libqemu": 9, "newlib": [9, 16, 21], "compil": [9, 10, 13, 16, 17, 20], "along": 9, "ccac": [9, 20], "av2h": [9, 20], "hhostlib": 9, "av3h": [9, 20], "them": 9, "arcv3": [9, 21], "right": 9, "now": [9, 18], "happen": [9, 16], "becaus": [9, 16, 17, 22], "absent": 9, "see": [9, 16, 17], "issu": [9, 16, 18, 22], "read": 9, "document": 9, "port": [9, 12, 17], "1234": [9, 12, 14], "listet": 9, "socket": 9, "chardev": 9, "tmp": [9, 11, 17], "wait": 9, "off": [9, 12], "id": [9, 17, 18], "gdb0": 9, "virt": [9, 17, 18], "machin": 9, "vmlinux": [9, 17, 18], "also": [9, 16, 20], "loader": 9, "must": 9, "instead": 9, "hx6x": 9, "csmith": 10, "emb": 10, "utah": 10, "edu": 10, "static": [10, 17], "dynam": [10, 17], "conform": 10, "c99": 10, "stress": 10, "analyz": 10, "process": [10, 16], "bug": [10, 22], "everi": [10, 14, 16], "report": 10, "more": [10, 16], "than": 10, "400": [10, 17], "previous": 10, "unknown": [10, 11], "argc": 10, "div": 10, "float": 10, "To": 10, "anoth": [10, 22], "hh": 10, "prepar": [11, 18, 22], "site": 11, "exp": 11, "separ": 11, "srcdir": 11, "compsrc": 11, "objdir": 11, "tmpdir": 11, "target_alia": 11, "target_triplet": 11, "arc_board_dir": 11, "qemu_serial_io": 11, "info": 11, "exist": [11, 16], "boards_dir": 11, "lappend": 11, "baseboard": 11, "verbos": [11, 12], "target_list": 11, "bash": [11, 21], "runtest": 11, "content": [12, 16, 18], "world": 12, "g": [12, 16, 17, 18, 20], "o0": [12, 16, 18, 21], "nsimdrv": 12, "tcf": 12, "nsim_hom": 12, "templat": 12, "hs48_full": 12, "width": 12, "height": 12, "defin": [12, 16], "hook": 12, "quit": 12, "confirm": 12, "remot": [12, 14], "load": [12, 14, 17], "b": [12, 17, 20], "continu": 12, "log": [12, 17, 21], "overwrit": [12, 16], "regist": 12, "txt": [12, 17, 18], "batch": 12, "caus": 13, "line": [13, 16, 18], "wa": 13, "invok": 13, "record": 13, "object": [13, 17], "being": 13, "onli": 13, "exact": 13, "format": [13, 16, 17, 20], "depend": [13, 16], "usual": 13, "take": 13, "form": 13, "section": 13, "ascii": 13, "text": [13, 16], "afterward": 13, "execut": 13, "inform": [13, 16, 17], "o2": [13, 17], "readelf": 13, "out": [13, 16, 21], "string": [13, 16], "dump": 13, "4": [13, 17, 20], "mtune": 13, "13": [13, 21], "march": 13, "64": [13, 17, 22], "21": [13, 17], "25": 13, "q": [13, 17], "help": [13, 16], "disassembli": 14, "next": 14, "time": 14, "stop": 14, "pc": 14, "x": [14, 17, 22], "10i": 14, "frecord": 15, "switch": 15, "statu": 15, "initi": [16, 18], "describ": [16, 18], "344": 16, "turn": 16, "differ": 16, "seem": 16, "like": 16, "consequ": 16, "leakag": 16, "somewher": 16, "assembl": [16, 17], "this_name_must_be_in_debug": 16, "nop": 16, "bad": 16, "11": 16, "objdump": [16, 17, 20], "wi": 16, "grep": 16, "dw_at_nam": 16, "indirect": 16, "offset": 16, "0x0": 16, "macro": 16, "unlik": 16, "poor": 16, "put": 16, "preprocess": 16, "expand": 16, "after": [16, 22], "gdwarf": 16, "task_arc64_dwarf": 16, "extra": 16, "gap": 16, "too": [16, 20], "big": 16, "him": 16, "know": 16, "skip": 16, "debug_lin": 16, "alwai": 16, "filenam": 16, "symbol": 16, "number": 16, "comment": [16, 18], "think": 16, "binutil": [16, 21], "blob": 16, "ga": 16, "dwarf2dbg": 16, "l2812": 16, "overwritten": 16, "even": 16, "sens": 16, "mayb": 16, "stage": 16, "platform": 16, "intel": 16, "side": 16, "arm": 16, "don": [16, 17], "t": [16, 17, 18], "why": 16, "properli": 16, "whet": 16, "valid": 16, "cannot": [16, 20], "thu": 16, "easiest": 16, "wai": 16, "prevent": [16, 17], "thei": 16, "useless": 16, "context": 16, "lead": [16, 17], "undefin": 16, "behavior": 16, "189": 17, "maintain": 17, "23": 17, "commit": 17, "pub": [17, 18], "scm": 17, "9712d9ec929fb6b3595d2970bbbac8b0b1c10ead": 17, "btf": 17, "bit": [17, 22], "enumer": 17, "howev": 17, "below": 17, "6": [17, 20], "structur": 17, "crash": [17, 20], "v1": 17, "d__lib": 17, "dcmake_install_prefix": 17, "ssh": [17, 18], "keygen": [17, 18], "rsa": [17, 18], "public": [17, 18], "privat": 17, "pair": 17, "enter": 17, "id_rsa": [17, 18], "passphras": 17, "empti": 17, "again": 17, "identif": 17, "been": 17, "hostnam": 17, "127": 17, "root": 17, "identityfil": 17, "busybox": 17, "config_feature_pidfil": 17, "config_pid_file_path": 17, "var": 17, "config_debug": 17, "config_debug_pessim": 17, "config_ftpd": 17, "config_feature_ftpd_writ": 17, "config_feature_ftpd_accept_broken_list": 17, "config_feature_ftpd_authent": 17, "config_nc": 17, "config_netcat": 17, "config_nc_serv": 17, "config_nc_extra": 17, "config_nc_110_compat": 17, "config_telnetd": 17, "config_feature_telnetd_standalon": 17, "config_feature_telnetd_port_default": 17, "config_feature_telnetd_inetd_wait": 17, "device_t": 17, "tabl": [17, 18], "makedev": 17, "readm": 17, "assign": [17, 21], "proper": 17, "ownership": 17, "permiss": 17, "variou": 17, "doesn": 17, "where": 17, "devtmpf": 17, "mdev": 17, "udev": 17, "type": 17, "uid": [17, 18], "gid": [17, 18], "major": 17, "minor": 17, "inc": 17, "755": 17, "1777": 17, "700": 17, "www": 17, "33": 17, "shadow": 17, "600": 17, "passwd": 17, "644": 17, "up": [17, 18], "pre": 17, "down": 17, "post": 17, "shahab": 17, "chang": 17, "dropbear": 17, "dropbear_rsa_host_kei": 17, "dropbear_ed25519_host_kei": 17, "usr": 17, "uncom": 17, "allow": 17, "non": 17, "x11r6": 17, "xfbdev": 17, "4755": 17, "copi": [17, 18], "ebpf_jit": 17, "authorized_kei": 17, "ebpf_defconfig": 17, "br2_toolchain_external_inet_rpc": [17, 18], "br2_enable_debug": 17, "br2_debug_3": 17, "br2_optimize_g": 17, "br2_target_generic_hostnam": 17, "br2_rootfs_device_t": 17, "br2_system_dhcp": [17, 18], "eth0": [17, 18], "br2_package_busybox_config_fragment_fil": 17, "br2_package_ncurs": 17, "br2_package_ncurses_wchar": 17, "br2_package_haveg": [17, 18], "br2_package_dropbear": 17, "br2_package_dropbear_disable_reversedn": 17, "br2_package_rsync": 17, "br2_target_rootfs_cpio": 17, "br2_package_host_kmod": 17, "br2_package_libbpf": 17, "br2_package_bpftool": 17, "br2_package_elfutil": 17, "pwd": 17, "br2_defconfig": 17, "makefil": 17, "error": 17, "diff": 17, "ae90af5b0425": 17, "4699a022079a": 17, "100644": 17, "7": 17, "ifneq": 17, "config_bpf_jit_always_on": 17, "___bpf_prog_run": 17, "gcse": 17, "disabl": [17, 21], "3193c0836f203": 17, "cflag": [17, 21], "nogcs": 17, "config_x86": 17, "config_cc_is_gcc": 17, "fno": 17, "endif": 17, "cflags_cor": 17, "call": 17, "cc": 17, "warn": 17, "overrid": 17, "init": 17, "yy": 17, "og": 17, "g3": [17, 21], "finlin": 17, "onc": 17, "ebpf_jit_defconfig": 17, "config_swap": 17, "config_sysvipc": 17, "config_posix_mqueu": 17, "config_cross_memory_attach": 17, "config_no_hz_idl": 17, "config_high_res_tim": 17, "config_bpf_syscal": 17, "config_bpf_jit": 17, "config_bpf_unpriv_default_off": 17, "config_preempt": 17, "config_ikconfig": 17, "config_ikconfig_proc": 17, "config_namespac": [17, 18], "config_uts_n": [17, 18], "config_pid_n": [17, 18], "config_initramfs_sourc": 17, "config_arc_builtin_dtb_nam": 17, "config_expert": 17, "config_sgetmask_syscal": 17, "config_debug_perf_use_vmalloc": 17, "config_compat_brk": 17, "config_slab": 17, "config_kprob": 17, "config_compat_32bit_tim": 17, "config_modul": 17, "config_compact": 17, "config_net": 17, "config_packet": 17, "config_packet_diag": 17, "config_unix": 17, "config_unix_diag": 17, "config_net_kei": 17, "config_inet": 17, "config_ipv6": [17, 18], "config_wireless": 17, "config_devtmpf": 17, "config_devtmpfs_mount": 17, "config_standalon": 17, "config_prevent_firmware_build": 17, "config_firmware_memmap": 17, "config_of": 17, "config_virtio_blk": 17, "config_netdevic": 17, "config_virtio_net": 17, "config_ethernet": 17, "config_wlan": 17, "config_input_evdev": 17, "config_input_keyboard": 17, "config_input_mous": 17, "config_serio": 17, "config_legacy_pti": 17, "config_serial_8250": 17, "config_serial_8250_16550a_vari": 17, "config_serial_8250_consol": 17, "config_serial_8250_nr_uart": 17, "config_serial_8250_runtime_uart": 17, "config_serial_8250_dw": 17, "config_serial_of_platform": 17, "config_hw_random": 17, "config_hwmon": 17, "config_hid": 17, "config_usb_support": 17, "config_virtio_mmio": 17, "config_common_clk": 17, "config_iommu_support": 17, "config_ext2_f": 17, "config_ext2_fs_xattr": 17, "config_tmpf": 17, "config_misc_filesystem": 17, "config_nfs_f": [17, 18], "config_debug_info_dwarf_toolchain_default": 17, "config_debug_info_btf": 17, "config_gdb_script": 17, "config_frame_warn": 17, "1024": 17, "config_debug_f": 17, "config_debug_memory_init": 17, "config_debug_preempt": 17, "config_boottime_trac": 17, "config_irqsoff_trac": 17, "config_preempt_trac": 17, "config_sched_trac": 17, "config_hwlat_trac": 17, "config_ftrace_syscal": 17, "config_test_bpf": 17, "cross_compil": [17, 21], "menuconfig": [17, 22], "lnximg": 17, "insdir": 17, "qinsdir": 17, "qport": 17, "2000": 17, "nport": 17, "2001": 17, "ftp": 17, "hostfwd": 17, "tcp": 17, "2021": 17, "tln": 17, "2023": 17, "nc": 17, "qflag": 17, "freq_hz": [17, 18], "50000000": [17, 18], "netdev": [17, 18], "net0": [17, 18], "virtio": [17, 18], "phoni": 17, "clean": [17, 21], "tui": 17, "auto": 17, "safe": 17, "dir": 17, "remotetimeout": 17, "3000": 17, "rem": 17, "bpf_int_jit_compil": 17, "cont": 17, "cgdb": 17, "rm": [17, 21], "sym": 17, "gdbinit": 17, "adn": 17, "mount": [17, 18], "debugf": 17, "sy": 17, "sysctl": 17, "core": 17, "bpf_jit_en": 17, "test_bpf": 17, "ko": 17, "insmod": 17, "AS": 17, "ld": 17, "di": 17, "visual": 17, "jump": 17, "color": 17, "disassembl": 17, "hs38_linux": 17, "fetch": 17, "messag": 17, "trace": 17, "raw": 17, "jite": 17, "byte": 17, "header": [17, 21], "bpftool": 17, "libbpf": 17, "src": [17, 21], "libzlib": 17, "libz": 17, "uapi": 17, "go": [17, 18], "minim": 17, "clang": 17, "d_target_arch_arc": 17, "idiraft": 17, "sysroot": 17, "skeleton": 17, "gen": 17, "skel": 17, "final": 17, "wall": 17, "l": [17, 21], "lbpf": 17, "lelf": 17, "lz": 17, "147": 18, "anonuid": 18, "anongid": 18, "u": 18, "respect": 18, "rw": 18, "all_squash": 18, "1000": 18, "no_subtree_check": 18, "insecur": 18, "rule": 18, "firewal": 18, "systemctl": 18, "rpcbind": 18, "sshd": 18, "cmd": 18, "perman": 18, "nfs3": 18, "mountd": 18, "rpc": 18, "bind": 18, "reload": 18, "exportf": 18, "ip": 18, "tuntap": 18, "tap1": 18, "addr": 18, "42": 18, "24": 18, "link": 18, "buildroot_build": 18, "glibc_test_defconfig": 18, "br2_toolchain_external_wchar": 18, "br2_toolchain_buildroot_cxx": 18, "br2_target_optim": 18, "br2_toolchain_glibc_gconv_libs_copi": 18, "br2_rootfs_users_t": 18, "br2_package_host_linux_headers_custom_5_16": 18, "br2_package_openssh": 18, "br2_package_ntp": 18, "br2_package_ntp_ntpd": 18, "br2_package_nfs_util": 18, "br2_package_sshf": 18, "br2_package_mak": 18, "br2_package_override_fil": 18, "buildroot_overrid": 18, "config_ipc_n": 18, "config_user_n": 18, "config_net_n": 18, "config_cgroup": 18, "config_memcg": 18, "linux_override_srcdir": 18, "task_glibc_mmu_bug": 18, "glibc_override_srcdir": 18, "v5": 18, "tag": 18, "36": 18, "cat": 18, "corp": 18, "usernam": 18, "group": 18, "password": 18, "shell": 18, "dirclean": 18, "ifnam": 18, "downscript": 18, "ifconfig": 18, "ping": 18, "addus": 18, "kei": 18, "full": 18, "realpath": [18, 21], "66": 18, "ga1dc0be03c9dd850b864bd7a9c03cf8e396eb7ca": 18, "__full_path_to_glibc_source__": 18, "nfg": 18, "nolock": 18, "sshf": 18, "idmap": 18, "allow_oth": 18, "wrapper": 18, "cross": [18, 22], "4x": [20, 21], "5x": 20, "mwdt": 20, "recogn": 20, "littlearc64": 20, "00000004": 20, "c0f1": 20, "shor": 20, "0xc0f1": 20, "740c": 20, "mov_": 20, "r0": 20, "8": 20, "752c": 20, "r1": 20, "exactli": 20, "push_": 20, "blink": 20, "opcod": 20, "automak": 21, "autotool": 21, "libmpc": 21, "libmpfr": 21, "libgmp": 21, "libncurs": 21, "patchutil": 21, "obtain": 21, "cg": 21, "arcv2": [21, 22], "multilib": [21, 22], "werror": 21, "fvar": 21, "track": 21, "cxxflag": 21, "torvald": 21, "checkout": 21, "headers_instal": 21, "config_isa_arcv2": 21, "install_hdr_path": 21, "config_isa_arcv3": 21, "my": 21, "tree": 21, "builder_path": 21, "headers_path": 21, "out_dir": 21, "log_fil": 21, "rf": 21, "touch": 21, "configure_linux": 21, "fpu": 21, "configure_baremet": 21, "v": 21, "tee": 21, "build_and_instal": 21, "product": 22, "ct": 22, "move": 22, "place": 22, "well": 22, "known": 22, "1809": 22, "most": 22, "interest": 22, "wide": 22, "rang": 22, "arcompact": 22, "arc600": 22, "arc700": 22, "aec": 22, "em": 22, "hs3x": 22}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"build": [0, 5, 7, 9, 17, 21, 22], "linux": [0, 4, 9, 17, 18, 21], "imag": 0, "tabl": [0, 4, 6, 8], "content": [0, 4, 8], "us": [0, 8, 9, 13], "resourc": 0, "obtain": 0, "buildroot": [0, 1, 2], "configur": [0, 1, 4, 5, 18], "arc": [0, 21], "h": 0, "3x": 0, "4x": 0, "glibc": [0, 18], "5x": 0, "uclibc": 0, "6x": 0, "predefin": 0, "addit": 0, "option": [0, 13], "environ": [3, 21], "bootstrap": 4, "ubuntu": [4, 5, 7, 18], "22": [4, 18], "04": [4, 18], "fedora": [4, 7, 18], "37": [4, 18], "profil": 4, "bashrc": 4, "setup": [4, 17], "git": 4, "instal": [4, 5, 7, 17], "rust": 4, "elfutil": [4, 17], "wsl": 5, "vpnkit": 5, "dn": 5, "resolv": 5, "vpn": 5, "shrink": 5, "virtual": 5, "disk": 5, "": [5, 6], "space": 5, "custom": 5, "kernel": [5, 9, 17, 18], "yurii": 6, "kolerov": 6, "document": 6, "indic": 6, "qemu": [7, 8, 20], "packag": 7, "verif": [8, 10, 12], "run": [9, 12, 17], "binari": 9, "bare": 9, "metal": 9, "target": [9, 13], "gcc": [9, 13], "metawar": 9, "develop": 9, "toolkit": 9, "gdb": [9, 12, 14], "server": [9, 12], "gener": [10, 17], "random": 10, "program": 10, "dejagnu": 11, "test": [11, 17], "compar": 12, "state": 12, "compil": 12, "an": 12, "exampl": 12, "client": 12, "frecord": 13, "switch": 13, "show": 13, "statu": 13, "snippet": 15, "file": 16, "direct": 16, "doe": 16, "work": 16, "intend": 16, "The": [16, 18], "problem": [16, 18], "reproduc": [16, 18], "solut": 16, "check": 17, "jit": 17, "ebpf": 17, "pahol": 17, "openssh": 17, "kei": 17, "rootf": 17, "cpio": 17, "boot": 17, "analyz": 17, "dump": 17, "simpl": 17, "bpf": 17, "applic": 17, "testsuit": 18, "fail": 18, "vanilla": 18, "nf": 18, "wsl2": 18, "tap": 18, "interfac": 18, "task": 19, "some": 20, "stack": 20, "oper": 20, "ar": 20, "present": 20, "from": [21, 22], "gnu": [21, 23], "toolchain": [21, 23], "prepar": 21, "baremet": 21, "script": 21, "crosstool": 22, "ng": 22}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 57}, "alltitles": {"Build Linux images": [[0, "build-linux-images"]], "Table of Contents": [[0, "table-of-contents"], [4, "table-of-contents"], [8, null]], "Useful resources": [[0, "useful-resources"]], "Obtaining Buildroot": [[0, "obtaining-buildroot"]], "Build images": [[0, "build-images"]], "Configuring Buildroot": [[0, "configuring-buildroot"]], "ARC HS 3x/4x (glibc)": [[0, "arc-hs-3x-4x-glibc"]], "ARC HS 5x (uClibc)": [[0, "arc-hs-5x-uclibc"]], "ARC HS 6x (glibc)": [[0, "arc-hs-6x-glibc"]], "Predefined configurations": [[0, "predefined-configurations"]], "Additional configuration options": [[0, "additional-configuration-options"]], "Buildroot configuration": [[1, "buildroot-configuration"]], "Buildroot": [[2, "buildroot"]], "Environment": [[3, "environment"]], "Linux": [[4, "linux"]], "Bootstrap Ubuntu 22.04": [[4, "bootstrap-ubuntu-22-04"]], "Bootstrap Fedora 37": [[4, "bootstrap-fedora-37"]], "Configure .profile": [[4, "configure-profile"]], "Configure .bashrc": [[4, "configure-bashrc"]], "Setup Git": [[4, "setup-git"]], "Install Rust": [[4, "install-rust"]], "Elfutils": [[4, "elfutils"]], "WSL": [[5, "wsl"]], "Install Ubuntu": [[5, "install-ubuntu"]], "Install wsl-vpnkit": [[5, "install-wsl-vpnkit"]], "Configure DNS resolving for VPN": [[5, "configure-dns-resolving-for-vpn"]], "Shrink virtual disk\u2019s space": [[5, "shrink-virtual-disk-s-space"]], "Build and install a custom kernel": [[5, "build-and-install-a-custom-kernel"]], "Yuriy Kolerov\u2019s documentation": [[6, "yuriy-kolerov-s-documentation"]], "Indices and tables": [[6, "indices-and-tables"]], "Building QEMU": [[7, "building-qemu"]], "Install packages for Ubuntu": [[7, "install-packages-for-ubuntu"]], "Install packages for Fedora": [[7, "install-packages-for-fedora"]], "Build and install QEMU": [[7, "build-and-install-qemu"]], "QEMU": [[8, "qemu"]], "Verification of QEMU": [[8, "verification-of-qemu"]], "Using QEMU": [[8, "using-qemu"]], "Building and running binaries": [[9, "building-and-running-binaries"]], "Build binaries for bare metal targets using GCC": [[9, "build-binaries-for-bare-metal-targets-using-gcc"]], "Build binaries for bare metal targets using MetaWare Development Toolkit": [[9, "build-binaries-for-bare-metal-targets-using-metaware-development-toolkit"]], "Run a GDB server": [[9, "run-a-gdb-server"], [12, "run-a-gdb-server"]], "Running the Linux kernel": [[9, "running-the-linux-kernel"]], "Verification by generating random programs": [[10, "verification-by-generating-random-programs"]], "DejaGnu tests": [[11, "dejagnu-tests"]], "Verification by comparing states": [[12, "verification-by-comparing-states"]], "Compile an example": [[12, "compile-an-example"]], "Run a GDB client": [[12, "run-a-gdb-client"]], "GCC": [[13, "gcc"]], "Using -frecord-gcc-switches": [[13, "using-frecord-gcc-switches"]], "Show status of target options": [[13, "show-status-of-target-options"]], "GDB": [[14, "gdb"]], "Snippets": [[15, "snippets"]], "\ud83d\udfe2 .file directive does not work as intended": [[16, "file-directive-does-not-work-as-intended"]], "The Problem": [[16, "the-problem"], [18, "the-problem"]], "Reproduce": [[16, "reproduce"], [18, "reproduce"]], "Solution": [[16, "solution"]], "\ud83d\udfe1 Checking JIT for eBPF": [[17, "checking-jit-for-ebpf"]], "Build and install elfutils": [[17, "build-and-install-elfutils"]], "Build and install Pahole": [[17, "build-and-install-pahole"]], "Generate and setup OpenSSH keys": [[17, "generate-and-setup-openssh-keys"]], "Building rootfs.cpio": [[17, "building-rootfs-cpio"]], "Building a Linux kernel": [[17, "building-a-linux-kernel"]], "Booting": [[17, "booting"]], "Run eBPF tests": [[17, "run-ebpf-tests"]], "Analyzing dumps": [[17, "analyzing-dumps"]], "Build a simple BPF application": [[17, "build-a-simple-bpf-application"]], "\ud83d\udfe1 glibc testsuite fails with vanilla Linux kernels": [[18, "glibc-testsuite-fails-with-vanilla-linux-kernels"]], "Configure NFS (Fedora 37)": [[18, "configure-nfs-fedora-37"]], "Configure NFS (WSL2 with Ubuntu 22.04)": [[18, "configure-nfs-wsl2-with-ubuntu-22-04"]], "Configure TAP interface": [[18, "configure-tap-interface"]], "Tasks": [[19, "tasks"]], "\ud83d\udfe1 Some stack operations are not presented in QEMU": [[20, "some-stack-operations-are-not-presented-in-qemu"]], "Building from arc-gnu-toolchain": [[21, "building-from-arc-gnu-toolchain"]], "Prepare environment": [[21, "prepare-environment"]], "Build baremetal toolchain": [[21, "build-baremetal-toolchain"]], "Build Linux toolchain": [[21, "build-linux-toolchain"]], "Scripts": [[21, "scripts"]], "Building from crosstool-ng": [[22, "building-from-crosstool-ng"]], "GNU Toolchain": [[23, "gnu-toolchain"]]}, "indexentries": {}})